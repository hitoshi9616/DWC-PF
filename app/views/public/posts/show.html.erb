<div class="container">

  <h2>投稿詳細</h2>

  <div class="row">
    <h5>投稿者</h5>
    <%= link_to customer_path(@post.customer.id) do %>
      <%= @post.customer.nickname %>
    <% end %>
  </div>

  <div class="row">
    <h5>タイトル</h5>
    <%= @post.title %>
  </div>

  <div class="row">
    <h5>内容</h5>
    <%= @post.text %>
  </div>

  <% if @post.customer_id == current_customer.id %>
    <div>
      <%= link_to "投稿削除", post_path(@post.id), method: :delete, "data-confirm" => "本当に削除しますか？" %>
    </div>
  <% end %>

  <div>
    <p>
      コメント件数：<%= @post.post_comments.count %>
    </p>
    <% @post.post_comments.each do |post_comment| %>
      <p><%= post_comment.customer.nickname %>
      <%= post_comment.created_at.strftime('%Y/%m/%d') %></p>
      <p><%= post_comment.comment %></p>
      <% if post_comment.customer == current_customer %>
        <%= link_to "コメント削除", post_post_comment_path(post_comment.post, post_comment), method: :delete, "data-confirm" => "本当に削除しますか？" %>
      <% end %>
    <% end %>
  </div>

  <div>
    <%= form_with model: [@post, @post_comment] do |f| %>
      <%= f.label :comment, "コメントフォーム" %><br />
      <%= f.text_area :comment %><br />
      <%= f.submit "コメントする" %>
    <% end %>
  </div>

</div>
